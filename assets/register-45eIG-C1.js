import{R as A,ae as C,af as k,Y as q,a0 as M,X as t,L as l,ax as v,aj as V,_ as P,Z as a,aO as R,av as u,ag as T,ah as E,an as _}from"./index-Cpz43kHv.js";import{c as B,a as n,f as F,u as N,e as i,V as U}from"./index.esm-DFJiPoDg.js";import{v as f}from"./index-BnQpr47X.js";import{V as w,a as I}from"./VRow-CQGUY1bV.js";import{V as L}from"./VContainer-TyyObbe_.js";const D={class:"text-center"},O={class:"text-center"},H={__name:"register",setup(j){const{t:s}=A(),{api:b}=_(),g=C(),h=k(),x=B({account:n().required(s("api.userAccountRequired")).min(4,s("api.userAccountTooShort")).max(20,s("api.userAccountTooLong")).test("isAlphanumeric",s("api.userAccountInvalid"),e=>f.isAlphanumeric(e)),email:n().required(s("api.userEmailRequired")).test("isEmail",s("api.userEmailInvalid"),e=>f.isEmail(e)),password:n().required(s("api.userPasswordRequired")).min(4,s("api.userPasswordTooShort")).max(20,s("api.userPasswordTooLong")),passwordConfirm:n().oneOf([F("password")],s("api.userPasswordNotMatch"))}),{handleSubmit:S,isSubmitting:$}=N({validationSchema:x}),m=i("account"),d=i("email"),c=i("password"),p=i("passwordConfirm"),y=S(async e=>{var o;try{await b.post("/user",{account:e.account,email:e.email,password:e.password}),g({text:s("register.success"),snackbarProps:{color:"success"}}),h.push("/login")}catch(r){console.log(r),g({text:s("api."+(((o=r==null?void 0:r.response)==null?void 0:o.data.message)||"unknownError")),snackbarProps:{color:"error"}})}});return(e,o)=>(q(),M(L,null,{default:t(()=>[l(I,null,{default:t(()=>[l(w,{cols:"12"},{default:t(()=>[v("h1",D,V(e.$t("nav.register")),1)]),_:1}),l(P),l(w,{cols:"12"},{default:t(()=>[l(U,{disabled:a($),onSubmit:R(a(y),["prevent"])},{default:t(()=>[l(u,{modelValue:a(m).value.value,"onUpdate:modelValue":o[0]||(o[0]=r=>a(m).value.value=r),"error-message":a(m).errorMessage.value,label:e.$t("user.account"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-message","label"]),l(u,{modelValue:a(d).value.value,"onUpdate:modelValue":o[1]||(o[1]=r=>a(d).value.value=r),"error-messages":a(d).errorMessage.value,label:e.$t("user.email")},null,8,["modelValue","error-messages","label"]),l(u,{modelValue:a(c).value.value,"onUpdate:modelValue":o[2]||(o[2]=r=>a(c).value.value=r),type:"password","error-messages":a(c).errorMessage.value,label:e.$t("user.password"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),l(u,{modelValue:a(p).value.value,"onUpdate:modelValue":o[3]||(o[3]=r=>a(p).value.value=r),type:"password","error-messages":a(p).errorMessage.value,label:e.$t("user.passwordConfirm"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),v("div",O,[l(T,{type:"submit",color:"primary"},{default:t(()=>[E(V(e.$t("register.submit")),1)]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{H as default};
